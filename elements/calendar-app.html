<!--
Lets user preview, configure, and print an annual wall calendar.
-->

<link rel="import" href="../components/polymer/polymer.html">
<link rel="import" href="../components/quetzal-button/quetzal-button.html">
<link rel="import" href="intro-note.html">
<link rel="import" href="sticky-note.html">
<link rel="import" href="world-map.html">
<link rel="import" href="year-calendar.html">

<polymer-element name="calendar-app" attributes="culture">

<template>

  <style>
  :host {
    display: block;
  }

  :host,
  button,
  input,
  select {
    font-family: "Myriad Pro", "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 15px;
  }

  tr:not(:last-child) td {
    padding-bottom: 2em;
  }
  td {
    vertical-align: top;
  }
  td:not(:first-child) {
    padding-left: 2em;
  }

  intro-note {
    width: 350px;
  }

  world-map {
    width: 375px;
  }

  year-calendar {
    font-size: 21px;
  }

  @media screen {  
    #main {
      border-collapse: collapse;
      margin: 2em auto;
    }
    year-calendar {
      background: white;
      box-shadow: 5px 5px 10px rgba( 0, 0, 0, 0.5 );
      padding: 2em;
    }
  }
  
  @media print {
    .noprint {
      display: none;
    }
  }
  </style>

  <table id="main">

    <tr class="noprint">
      <td>
        <intro-note id="intro">
        </intro-note>
      </td>
      <td>
        <world-map culture="{{culture}}"></world-map>
      </td>
    </tr>

    <tr id="yearRowNext">
      <td colspan="2">
        <year-calendar id="calendarNext" culture="{{culture}}">
          <quetzal-button class="noprint" on-click="{{printNextYear}}" quiet>Print</quetzal-button>
        </year-calendar>
      </td>
    </tr>

    <tr id="yearRowCurrent" class="noprint">
      <td colspan="2">
        <year-calendar id="calendarCurrent" culture="{{culture}}">
          <quetzal-button class="noprint" on-click="{{printCurrentYear}}" quiet>Print</quetzal-button>
        </year-calendar>
      </td>
    </tr>

    <tr class="noprint">
      <td>
        <sticky-note id="tips">
          <b>Tip:</b> In the print dialogâ€¦
          <ul>
            <li>Turn <b>off</b> "Headers and Footers".</li>
            <li>Turn <b>on</b> "Background colors and images".</li>
          </ul>
        </sticky-note>
      </td>
    </tr>

  </div>

</template>

<script>
Polymer( "calendar-app", {

  applyAuthorStyles: true,

  ready: function() {
    // Set date of calendar for next year.
    var date = new Date();
    this.$.calendarNext.year = date.getFullYear() + 1;
  },

  printCurrentYear: function() {
    // Temporarily make the current year the one which will be printed.
    this.$.yearRowNext.classList.toggle( "noprint", true );
    this.$.yearRowCurrent.classList.toggle( "noprint", false );
    window.print();
    this.$.yearRowNext.classList.toggle( "noprint", false );
    this.$.yearRowCurrent.classList.toggle( "noprint", true );
  },

  printNextYear: function() {
    window.print();
  }

});
</script>

</polymer-element>